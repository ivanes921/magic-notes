<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,maximum-scale=1,user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" id="status-bar-style" />
  <title>Заметка</title>
  <style>
    :root{
      --bg: #ffffff;
      --text: #1c1c1e;
      --muted-icon: rgba(60,60,67,.30);      /* iOS grey (light) */
      --safe-t: env(safe-area-inset-top, 0px);
      --safe-b: env(safe-area-inset-bottom, 0px);
      --safe-l: env(safe-area-inset-left, 0px);
      --safe-r: env(safe-area-inset-right, 0px);
      --bar-h: 66px;                         /* высота топ-бара */
      --tool-h: 54px;                        /* высота нижней панели */
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg: #000000;
        --text: #f2f2f7;
        --muted-icon: rgba(235,235,245,.55); /* iOS grey (dark) */
      }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      background:var(--bg);
      color: var(--text);
      font:16px/1 -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Верхняя панель */
    .topbar{
      position:sticky; top:0; z-index:10;
      height: calc(var(--bar-h) + var(--safe-t));
      padding-top: var(--safe-t);
      display:flex; align-items:center; justify-content:space-between;
      padding-left: calc(24px + var(--safe-l));
      padding-right: calc(8px + var(--safe-r));
      background: transparent;
    }
    .left, .right{ display:flex; align-items:center; }
    .right{ gap:7px; }
    .left .hit{ justify-content:flex-start; padding-left:14px; }
    .hit{ width:66px; height:66px; display:flex; align-items:center; justify-content:center; }

    /* Поле «листа» */
    .sheet{
      min-height: calc(100vh - var(--bar-h) - var(--tool-h) - var(--safe-t) - var(--safe-b));
      padding: 8px calc(12px + var(--safe-r)) 8px calc(24px + var(--safe-l));
      cursor: text;
    }

    .note{
      min-height: calc(100vh - var(--bar-h) - var(--tool-h) - var(--safe-t) - var(--safe-b) - 16px);
      outline: none;
      caret-color: #E4AF0A;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .note .title,
    .note .body{
      min-height: 1.2em;
      white-space: pre-wrap;
    }

    .note .title{
      font-size: 32px;
      font-weight: 700;
      line-height: 1.1;
      letter-spacing: -0.02em;
    }

    .note .body{
      font-size: 18px;
      line-height: 1.35;
    }

    .note .photo-block{
      border-radius: 12px;
      overflow: hidden;
      align-self: flex-start;
      max-width: 100%;
    }

    .note .photo-block img{
      display: block;
      width: 100%;
      height: auto;
    }

    /* Нижняя панель инструментов */
    .toolbar{
      position:fixed; left:0; right:0; bottom:0; z-index:10;
      height: calc(var(--tool-h) + var(--safe-b));
      padding: 4px calc(12px + var(--safe-r)) calc(8px + var(--safe-b)) calc(12px + var(--safe-l));
      display:flex; align-items:flex-end; justify-content:space-between;
      background: transparent;
    }
    .tool{ width:68px; height:44px; display:flex; align-items:center; justify-content:center; }

    /* Перекрашиваем «пассивные» иконки в зависимости от темы */
    .muted *{ fill: var(--muted-icon) !important; }

    /* Адаптивность для узких экранов */
    @media (max-width: 380px){
      .tool{ width:56px; }
    }
  </style>
</head>
<body>

  <!-- ВЕРХ -->
  <header class="topbar" role="navigation" aria-label="Навигация">
    <div class="left">
      <div class="hit" aria-label="Назад">
        <!-- НАЗАД (жёлтый) -->
        <!-- source: твой файл -->
        <svg width="83" height="44" viewBox="0 0 83 44" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.2891 22.2441C13.2962 22.0221 13.3392 21.818 13.418 21.6318C13.5039 21.4456 13.6328 21.2666 13.8047 21.0947L22.0762 13.0059C22.3483 12.7337 22.6813 12.5977 23.0752 12.5977C23.3473 12.5977 23.5908 12.6621 23.8057 12.791C24.0277 12.9199 24.2031 13.0954 24.332 13.3174C24.4681 13.5322 24.5361 13.7721 24.5361 14.0371C24.5361 14.4382 24.3857 14.7891 24.085 15.0898L16.7266 22.2441L24.085 29.3984C24.3857 29.7064 24.5361 30.0573 24.5361 30.4512C24.5361 30.7233 24.4681 30.9668 24.332 31.1816C24.2031 31.3965 24.0277 31.5684 23.8057 31.6973C23.5908 31.8262 23.3473 31.8906 23.0752 31.8906C22.6813 31.8906 22.3483 31.7546 22.0762 31.4824L13.8047 23.3936C13.6257 23.2217 13.4932 23.0426 13.4072 22.8564C13.3285 22.6631 13.2891 22.459 13.2891 22.2441Z" fill="#E4AF0A"/>
<path d="M34.6104 28V16.022H36.1045V21.2017H42.6787V16.022H44.1729V28H42.6787V22.5464H36.1045V28H34.6104ZM49.238 28.1577C48.6735 28.1577 48.1644 28.0498 47.7106 27.834C47.2624 27.6182 46.9054 27.311 46.6398 26.9126C46.3797 26.5142 46.2497 26.0438 46.2497 25.5015V25.4849C46.2497 24.9536 46.377 24.4998 46.6315 24.1235C46.8861 23.7417 47.2568 23.4429 47.7438 23.2271C48.2308 23.0112 48.8202 22.884 49.5119 22.8452L52.799 22.646V23.7998L49.6862 23.999C49.0055 24.0378 48.5075 24.1789 48.1921 24.4224C47.8822 24.6659 47.7272 25.009 47.7272 25.4517V25.4683C47.7272 25.922 47.8988 26.2762 48.2419 26.5308C48.585 26.7798 49.0166 26.9043 49.5368 26.9043C50.0293 26.9043 50.4665 26.8075 50.8483 26.6138C51.2302 26.4146 51.529 26.1462 51.7448 25.8086C51.9662 25.471 52.0768 25.0892 52.0768 24.6631V21.874C52.0768 21.3206 51.9081 20.9001 51.5705 20.6123C51.2385 20.319 50.7376 20.1724 50.068 20.1724C49.5313 20.1724 49.0913 20.2692 48.7482 20.4629C48.4051 20.651 48.1755 20.9194 48.0593 21.2681L48.051 21.293H46.6066L46.6149 21.2432C46.6924 20.7728 46.8861 20.3633 47.196 20.0146C47.5114 19.6605 47.9181 19.3866 48.4162 19.1929C48.9142 18.9937 49.4815 18.894 50.1179 18.894C50.8483 18.894 51.4653 19.013 51.9689 19.251C52.478 19.4889 52.8626 19.832 53.1227 20.2803C53.3884 20.723 53.5212 21.2542 53.5212 21.874V28H52.0768V26.6802H51.944C51.7559 26.9956 51.5262 27.264 51.2551 27.4854C50.9894 27.7067 50.6878 27.8755 50.3503 27.9917C50.0127 28.1024 49.6419 28.1577 49.238 28.1577ZM58.9349 28.166C58.2985 28.166 57.723 28.0664 57.2084 27.8672C56.6992 27.668 56.2842 27.3913 55.9632 27.0371C55.6423 26.6774 55.4514 26.2568 55.3905 25.7754L55.3822 25.709H56.8514L56.868 25.7754C56.9621 26.1406 57.1945 26.4312 57.5653 26.647C57.9361 26.8628 58.3926 26.9707 58.9349 26.9707C59.5934 26.9707 60.1081 26.8268 60.4789 26.5391C60.8496 26.2513 61.035 25.8861 61.035 25.4434V25.4268C61.035 24.9398 60.8552 24.5828 60.4955 24.356C60.1413 24.1235 59.6211 24.0073 58.9349 24.0073H57.5404V22.812H58.9349C59.5104 22.812 59.9504 22.6986 60.2547 22.4717C60.5646 22.2393 60.7196 21.8906 60.7196 21.4258V21.4092C60.7196 21.0273 60.5729 20.7119 60.2796 20.4629C59.9919 20.2083 59.5602 20.0811 58.9847 20.0811C58.4756 20.0811 58.044 20.1862 57.6898 20.3965C57.3356 20.6068 57.1226 20.8918 57.0506 21.2515L57.0423 21.293H55.6312L55.6395 21.2349C55.7115 20.7534 55.8941 20.3384 56.1874 19.9897C56.4862 19.6356 56.8736 19.3644 57.3495 19.1763C57.8309 18.9826 58.376 18.8857 58.9847 18.8857C59.6543 18.8857 60.2215 18.9881 60.6864 19.1929C61.1568 19.3976 61.5137 19.6826 61.7572 20.0479C62.0062 20.4076 62.1307 20.8254 62.1307 21.3013V21.3179C62.1307 21.7716 61.9951 22.1812 61.724 22.5464C61.4528 22.9116 61.0959 23.1468 60.6532 23.252V23.3848C61.0461 23.4678 61.3754 23.6006 61.641 23.7832C61.9121 23.9658 62.1141 24.1899 62.2469 24.4556C62.3853 24.7212 62.4545 25.02 62.4545 25.3521V25.3687C62.4545 25.922 62.305 26.409 62.0062 26.8296C61.7129 27.2502 61.3006 27.5794 60.7694 27.8174C60.2437 28.0498 59.6322 28.166 58.9349 28.166ZM66.8887 28.1577C66.3243 28.1577 65.8151 28.0498 65.3614 27.834C64.9131 27.6182 64.5562 27.311 64.2906 26.9126C64.0305 26.5142 63.9004 26.0438 63.9004 25.5015V25.4849C63.9004 24.9536 64.0277 24.4998 64.2823 24.1235C64.5368 23.7417 64.9076 23.4429 65.3946 23.2271C65.8815 23.0112 66.4709 22.884 67.1626 22.8452L70.4497 22.646V23.7998L67.337 23.999C66.6563 24.0378 66.1582 24.1789 65.8428 24.4224C65.5329 24.6659 65.378 25.009 65.378 25.4517V25.4683C65.378 25.922 65.5495 26.2762 65.8926 26.5308C66.2357 26.7798 66.6674 26.9043 67.1875 26.9043C67.6801 26.9043 68.1172 26.8075 68.4991 26.6138C68.8809 26.4146 69.1797 26.1462 69.3955 25.8086C69.6169 25.471 69.7276 25.0892 69.7276 24.6631V21.874C69.7276 21.3206 69.5588 20.9001 69.2212 20.6123C68.8892 20.319 68.3884 20.1724 67.7188 20.1724C67.182 20.1724 66.7421 20.2692 66.399 20.4629C66.0559 20.651 65.8262 20.9194 65.71 21.2681L65.7017 21.293H64.2574L64.2657 21.2432C64.3431 20.7728 64.5368 20.3633 64.8467 20.0146C65.1621 19.6605 65.5689 19.3866 66.0669 19.1929C66.565 18.9937 67.1322 18.894 67.7686 18.894C68.4991 18.894 69.1161 19.013 69.6197 19.251C70.1288 19.4889 70.5134 19.832 70.7735 20.2803C71.0391 20.723 71.1719 21.2542 71.1719 21.874V28H69.7276V26.6802H69.5948C69.4066 26.9956 69.177 27.264 68.9058 27.4854C68.6402 27.7067 68.3386 27.8755 68.001 27.9917C67.6634 28.1024 67.2927 28.1577 66.8887 28.1577ZM73.7468 30.3657H72.4021V26.8047H73.1491C73.4756 26.5889 73.7247 26.2264 73.8962 25.7173C74.0678 25.2026 74.1729 24.6437 74.2116 24.0405L74.5603 19.0518H80.6613V26.8047H82.0891V30.3657H80.7444V28H73.7468V30.3657ZM79.217 26.8047V20.2471H75.8386L75.5564 24.0737C75.5176 24.616 75.4374 25.1169 75.3156 25.5762C75.1939 26.0299 75.0279 26.3952 74.8176 26.6719V26.8047H79.217Z" fill="#E4AF0A"/>
</svg>
      </div>
    </div>

    <div class="right">
      <div class="hit muted" data-role="share" aria-label="Поделиться" aria-disabled="true">
        <!-- Поделиться -->
        <svg width="25" height="44" viewBox="0 0 25 44" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.33398 33.7705C5.20964 33.7705 4.36458 33.4912 3.79883 32.9326C3.24023 32.3812 2.96094 31.5505 2.96094 30.4404V19.8379C2.96094 18.7279 3.24023 17.8971 3.79883 17.3457C4.36458 16.7871 5.20964 16.5078 6.33398 16.5078H9.62109V18.2373H6.35547C5.81836 18.2373 5.40658 18.3805 5.12012 18.667C4.83366 18.9463 4.69043 19.3652 4.69043 19.9238V30.3545C4.69043 30.9131 4.83366 31.332 5.12012 31.6113C5.40658 31.8978 5.81836 32.041 6.35547 32.041H18.623C19.153 32.041 19.5648 31.8978 19.8584 31.6113C20.152 31.332 20.2988 30.9131 20.2988 30.3545V19.9238C20.2988 19.3652 20.152 18.9463 19.8584 18.667C19.5648 18.3805 19.153 18.2373 18.623 18.2373H15.3574V16.5078H18.6553C19.7796 16.5078 20.6211 16.7871 21.1797 17.3457C21.7454 17.8971 22.0283 18.7279 22.0283 19.8379V30.4404C22.0283 31.5505 21.7454 32.3812 21.1797 32.9326C20.6211 33.4912 19.7796 33.7705 18.6553 33.7705H6.33398ZM12.4893 25.3486C12.2601 25.3486 12.0596 25.2663 11.8877 25.1016C11.723 24.9368 11.6406 24.7435 11.6406 24.5215V13.5859L11.7051 11.9854L11.1035 12.6191L9.43848 14.3916C9.28809 14.5635 9.09115 14.6494 8.84766 14.6494C8.62565 14.6494 8.43945 14.5778 8.28906 14.4346C8.14583 14.2913 8.07422 14.1123 8.07422 13.8975C8.07422 13.6898 8.16016 13.5 8.33203 13.3281L11.8662 9.91211C11.9808 9.80469 12.0846 9.73307 12.1777 9.69727C12.278 9.6543 12.3818 9.63281 12.4893 9.63281C12.6038 9.63281 12.7077 9.6543 12.8008 9.69727C12.901 9.73307 13.0049 9.80469 13.1123 9.91211L16.6572 13.3281C16.8219 13.5 16.9043 13.6898 16.9043 13.8975C16.9043 14.1123 16.8291 14.2913 16.6787 14.4346C16.5283 14.5778 16.3421 14.6494 16.1201 14.6494C15.8838 14.6494 15.6904 14.5635 15.54 14.3916L13.8857 12.6191L13.2842 11.9854L13.3486 13.5859V24.5215C13.3486 24.7435 13.2627 24.9368 13.0908 25.1016C12.9261 25.2663 12.7256 25.3486 12.4893 25.3486Z" fill="#E4AF0A"/>
</svg>

      </div>
      <div class="hit" aria-label="Меню">
        <svg width="25" height="44" viewBox="0 0 25 44" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12.5 33.2012C10.9889 33.2012 9.57096 32.9147 8.24609 32.3418C6.92122 31.776 5.75749 30.9919 4.75488 29.9893C3.75228 28.9867 2.96452 27.8229 2.3916 26.498C1.82585 25.1732 1.54297 23.7552 1.54297 22.2441C1.54297 20.7331 1.82585 19.3151 2.3916 17.9902C2.96452 16.6654 3.75228 15.5016 4.75488 14.499C5.75749 13.4893 6.92122 12.7015 8.24609 12.1357C9.57096 11.57 10.9889 11.2871 12.5 11.2871C14.0111 11.2871 15.429 11.57 16.7539 12.1357C18.0788 12.7015 19.2425 13.4893 20.2451 14.499C21.2477 15.5016 22.0319 16.6654 22.5977 17.9902C23.1706 19.3151 23.457 20.7331 23.457 22.2441C23.457 23.7552 23.1706 25.1732 22.5977 26.498C22.0319 27.8229 21.2477 28.9867 20.2451 29.9893C19.2425 30.9919 18.0788 31.776 16.7539 32.3418C15.429 32.9147 14.0111 33.2012 12.5 33.2012ZM12.5 31.375C13.7604 31.375 14.9421 31.1387 16.0449 30.666C17.1478 30.1934 18.1182 29.5381 18.9561 28.7002C19.7939 27.8623 20.4492 26.8919 20.9219 25.7891C21.3945 24.6862 21.6309 23.5046 21.6309 22.2441C21.6309 20.9837 21.3945 19.8021 20.9219 18.6992C20.4492 17.5892 19.7939 16.6188 18.9561 15.7881C18.1182 14.9502 17.1478 14.2949 16.0449 13.8223C14.9421 13.3496 13.7604 13.1133 12.5 13.1133C11.2396 13.1133 10.0579 13.3496 8.95508 13.8223C7.85221 14.2949 6.88184 14.9502 6.04395 15.7881C5.20605 16.6188 4.55078 17.5892 4.07812 18.6992C3.60547 19.8021 3.36914 20.9837 3.36914 22.2441C3.36914 23.5046 3.60547 24.6862 4.07812 25.7891C4.55078 26.8919 5.20605 27.8623 6.04395 28.7002C6.88184 29.5381 7.85221 30.1934 8.95508 30.666C10.0579 31.1387 11.2396 31.375 12.5 31.375ZM7.4834 23.791C7.05371 23.791 6.6849 23.6406 6.37695 23.3398C6.07617 23.0319 5.92578 22.6631 5.92578 22.2334C5.92578 21.8037 6.07617 21.4385 6.37695 21.1377C6.6849 20.8298 7.05371 20.6758 7.4834 20.6758C7.90592 20.6758 8.27116 20.8298 8.5791 21.1377C8.88704 21.4385 9.04102 21.8037 9.04102 22.2334C9.04102 22.6631 8.88704 23.0319 8.5791 23.3398C8.27832 23.6406 7.91309 23.791 7.4834 23.791ZM12.4893 23.791C12.0667 23.791 11.7015 23.6406 11.3936 23.3398C11.0928 23.0319 10.9424 22.6631 10.9424 22.2334C10.9424 21.8037 11.0928 21.4385 11.3936 21.1377C11.7015 20.8298 12.0667 20.6758 12.4893 20.6758C12.9189 20.6758 13.2842 20.8298 13.585 21.1377C13.8929 21.4385 14.0469 21.8037 14.0469 22.2334C14.0469 22.6631 13.8929 23.0319 13.585 23.3398C13.2842 23.6406 12.9189 23.791 12.4893 23.791ZM17.5059 23.791C17.0762 23.791 16.7074 23.6406 16.3994 23.3398C16.0986 23.0319 15.9482 22.6631 15.9482 22.2334C15.9482 21.8037 16.0986 21.4385 16.3994 21.1377C16.7074 20.8298 17.0762 20.6758 17.5059 20.6758C17.9355 20.6758 18.3008 20.8298 18.6016 21.1377C18.9095 21.4385 19.0635 21.8037 19.0635 22.2334C19.0635 22.6631 18.9095 23.0319 18.6016 23.3398C18.3008 23.6406 17.9355 23.791 17.5059 23.791Z" fill="#E4AF0A"/>
</svg>
      </div>
    </div>
  </header>

  <!-- ЛИСТ -->
  <div class="sheet" aria-label="Лист заметки">
    <div class="note" contenteditable="true" role="textbox" aria-multiline="true" aria-label="Текст заметки" spellcheck="false">
      <div class="title"></div>
    </div>
  </div>

  <input type="file" accept="image/*" capture="environment" id="camera-input" style="display:none" aria-hidden="true" />

  <!-- НИЗ -->
  <footer class="toolbar" role="toolbar" aria-label="Панель инструментов">
    <div class="tool" aria-label="Пункты">
      <!-- ПУНКТЫ (жёлтый) -->
      <svg width="25" height="22" viewBox="0 0 25 22" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4.62988 21.6992C3.79199 21.6992 3.02214 21.488 2.32031 21.0654C1.61849 20.6429 1.05632 20.0807 0.633789 19.3789C0.211263 18.6771 0 17.9072 0 17.0693C0 16.2243 0.207682 15.4508 0.623047 14.749C1.04557 14.0472 1.60775 13.485 2.30957 13.0625C3.01139 12.64 3.78483 12.4287 4.62988 12.4287C5.47493 12.4287 6.24479 12.64 6.93945 13.0625C7.64128 13.4779 8.20345 14.0365 8.62598 14.7383C9.0485 15.4401 9.25977 16.2171 9.25977 17.0693C9.25977 17.9072 9.0485 18.6771 8.62598 19.3789C8.20345 20.0807 7.64128 20.6429 6.93945 21.0654C6.24479 21.488 5.47493 21.6992 4.62988 21.6992ZM4.62988 20.1309C5.18132 20.1309 5.68978 19.9912 6.15527 19.7119C6.62077 19.4326 6.99316 19.0602 7.27246 18.5947C7.55176 18.1292 7.69141 17.6208 7.69141 17.0693C7.69141 16.5107 7.55176 15.9987 7.27246 15.5332C6.99316 15.0677 6.62077 14.6953 6.15527 14.416C5.68978 14.1367 5.18132 13.9971 4.62988 13.9971C4.07845 13.9971 3.56999 14.1367 3.10449 14.416C2.639 14.6953 2.2666 15.0677 1.9873 15.5332C1.70801 15.9987 1.56836 16.5107 1.56836 17.0693C1.56836 17.6208 1.70801 18.1292 1.9873 18.5947C2.2666 19.0602 2.639 19.4326 3.10449 19.7119C3.56999 19.9912 4.07845 20.1309 4.62988 20.1309ZM12.5254 5.51074C12.2819 5.51074 12.0742 5.42839 11.9023 5.26367C11.7376 5.0918 11.6553 4.88411 11.6553 4.64062C11.6553 4.39714 11.7376 4.19303 11.9023 4.02832C12.0742 3.86361 12.2819 3.78125 12.5254 3.78125H23.2031C23.4466 3.78125 23.6543 3.86361 23.8262 4.02832C23.998 4.19303 24.084 4.39714 24.084 4.64062C24.084 4.88411 23.998 5.0918 23.8262 5.26367C23.6543 5.42839 23.4466 5.51074 23.2031 5.51074H12.5254ZM12.5254 17.9287C12.2819 17.9287 12.0742 17.8464 11.9023 17.6816C11.7376 17.5098 11.6553 17.3057 11.6553 17.0693C11.6553 16.8258 11.7376 16.6217 11.9023 16.457C12.0742 16.2852 12.2819 16.1992 12.5254 16.1992H23.2031C23.4466 16.1992 23.6543 16.2852 23.8262 16.457C23.998 16.6217 24.084 16.8258 24.084 17.0693C24.084 17.3057 23.998 17.5098 23.8262 17.6816C23.6543 17.8464 23.4466 17.9287 23.2031 17.9287H12.5254ZM4.62988 9.27051C3.79199 9.27051 3.02214 9.05924 2.32031 8.63672C1.61849 8.21419 1.05632 7.65202 0.633789 6.9502C0.211263 6.24837 0 5.47493 0 4.62988C0 3.78483 0.207682 3.01139 0.623047 2.30957C1.04557 1.60775 1.60775 1.04915 2.30957 0.633789C3.01139 0.211263 3.78483 0 4.62988 0C5.47493 0 6.24479 0.211263 6.93945 0.633789C7.64128 1.04915 8.20345 1.60775 8.62598 2.30957C9.0485 3.01139 9.25977 3.78483 9.25977 4.62988C9.25977 5.47493 9.0485 6.24837 8.62598 6.9502C8.20345 7.65202 7.64128 8.21419 6.93945 8.63672C6.24479 9.05924 5.47493 9.27051 4.62988 9.27051ZM4.08203 7.12207C4.31836 7.12207 4.50098 7.02181 4.62988 6.82129L6.875 3.29785C6.9681 3.14746 7.01465 3.00065 7.01465 2.85742C7.01465 2.72135 6.95736 2.60319 6.84277 2.50293C6.73535 2.40267 6.60645 2.35254 6.45605 2.35254C6.2627 2.35254 6.10156 2.4528 5.97266 2.65332L4.06055 5.72559L3.22266 4.66211C3.15104 4.56901 3.07585 4.50098 2.99707 4.45801C2.92546 4.41504 2.83594 4.39355 2.72852 4.39355C2.58529 4.39355 2.45996 4.44727 2.35254 4.55469C2.25228 4.66211 2.20215 4.7946 2.20215 4.95215C2.20215 5.11686 2.2487 5.25651 2.3418 5.37109L3.54492 6.82129C3.6237 6.91439 3.70247 6.98958 3.78125 7.04688C3.86719 7.09701 3.96745 7.12207 4.08203 7.12207Z" fill="#E4AF0A"/>
</svg>
</div>

    <div class="tool" aria-label="Камера">
      <!-- КАМЕРА (жёлтый) -->
      <svg width="68" height="44" viewBox="0 0 68 44" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M24.1816 32.1484C23.0573 32.1484 22.2122 31.8691 21.6465 31.3105C21.0879 30.7591 20.8086 29.9284 20.8086 28.8184V17.5713C20.8086 16.4684 21.0879 15.6413 21.6465 15.0898C22.2122 14.5312 23.0573 14.252 24.1816 14.252H27.1787C27.6012 14.252 27.9128 14.2018 28.1133 14.1016C28.3138 13.9941 28.5322 13.8079 28.7686 13.543L29.6279 12.5762C29.9001 12.2826 30.1937 12.057 30.5088 11.8994C30.8311 11.7419 31.2679 11.6631 31.8193 11.6631H36.1055C36.6569 11.6631 37.0938 11.7419 37.416 11.8994C37.7383 12.057 38.0319 12.2826 38.2969 12.5762L39.1562 13.543C39.321 13.722 39.4678 13.8652 39.5967 13.9727C39.7327 14.0729 39.8867 14.1445 40.0586 14.1875C40.2305 14.2305 40.4596 14.252 40.7461 14.252H43.8184C44.9355 14.252 45.777 14.5312 46.3428 15.0898C46.9085 15.6413 47.1914 16.4684 47.1914 17.5713V28.8184C47.1914 29.9284 46.9085 30.7591 46.3428 31.3105C45.777 31.8691 44.9355 32.1484 43.8184 32.1484H24.1816ZM24.2031 30.4189H43.7861C44.3161 30.4189 44.7279 30.2793 45.0215 30C45.3151 29.7135 45.4619 29.291 45.4619 28.7324V17.668C45.4619 17.1094 45.3151 16.6904 45.0215 16.4111C44.7279 16.1247 44.3161 15.9814 43.7861 15.9814H40.3164C39.8294 15.9814 39.4355 15.9277 39.1348 15.8203C38.8411 15.7057 38.5583 15.498 38.2861 15.1973L37.4482 14.252C37.1403 13.9082 36.8682 13.679 36.6318 13.5645C36.3955 13.4499 36.041 13.3926 35.5684 13.3926H32.3564C31.8838 13.3926 31.5293 13.4499 31.293 13.5645C31.0566 13.679 30.7845 13.9082 30.4766 14.252L29.6387 15.1973C29.3665 15.498 29.0801 15.7057 28.7793 15.8203C28.4857 15.9277 28.0954 15.9814 27.6084 15.9814H24.2031C23.6732 15.9814 23.2614 16.1247 22.9678 16.4111C22.6813 16.6904 22.5381 17.1094 22.5381 17.668V28.7324C22.5381 29.291 22.6813 29.7135 22.9678 30C23.2614 30.2793 23.6732 30.4189 24.2031 30.4189ZM34 28.8721C33.1836 28.8721 32.4209 28.7217 31.7119 28.4209C31.0029 28.1201 30.3799 27.7012 29.8428 27.1641C29.3128 26.627 28.8939 26.0039 28.5859 25.2949C28.2852 24.5859 28.1348 23.8197 28.1348 22.9961C28.1348 22.1797 28.2852 21.417 28.5859 20.708C28.8939 19.999 29.3128 19.376 29.8428 18.8389C30.3799 18.3018 31.0029 17.8828 31.7119 17.582C32.4209 17.2812 33.1836 17.1309 34 17.1309C35.0814 17.1309 36.0661 17.3923 36.9541 17.915C37.8421 18.4378 38.5475 19.1432 39.0703 20.0312C39.5931 20.9193 39.8545 21.9076 39.8545 22.9961C39.8545 23.8197 39.7041 24.5859 39.4033 25.2949C39.1025 26.0039 38.6836 26.627 38.1465 27.1641C37.6094 27.7012 36.9863 28.1201 36.2773 28.4209C35.5684 28.7217 34.8092 28.8721 34 28.8721ZM34 27.2393C34.7806 27.2393 35.4896 27.0495 36.127 26.6699C36.7715 26.2904 37.2835 25.7819 37.6631 25.1445C38.0426 24.5 38.2324 23.7839 38.2324 22.9961C38.2324 22.2155 38.0426 21.5065 37.6631 20.8691C37.2835 20.2246 36.7715 19.7126 36.127 19.333C35.4896 18.9463 34.7806 18.7529 34 18.7529C33.2194 18.7529 32.5068 18.9463 31.8623 19.333C31.2249 19.7126 30.7129 20.2246 30.3262 20.8691C29.9466 21.5065 29.7568 22.2155 29.7568 22.9961C29.7568 23.7839 29.9466 24.5 30.3262 25.1445C30.7129 25.7819 31.2249 26.2904 31.8623 26.6699C32.5068 27.0495 33.2194 27.2393 34 27.2393ZM40.2949 19.043C40.2949 18.6849 40.4274 18.3734 40.6924 18.1084C40.9574 17.8434 41.276 17.7109 41.6484 17.7109C42.0065 17.7109 42.318 17.8434 42.583 18.1084C42.848 18.3734 42.9805 18.6849 42.9805 19.043C42.9805 19.4154 42.848 19.7305 42.583 19.9883C42.318 20.2461 42.0065 20.375 41.6484 20.375C41.276 20.375 40.9574 20.2497 40.6924 19.999C40.4274 19.7412 40.2949 19.4225 40.2949 19.043Z" fill="#E4AF0A"/>
</svg>
    </div>

    <div class="tool" aria-label="Маркер">
      <!-- МАРКЕР (жёлтый) -->
      <svg width="68" height="44" viewBox="0 0 68 44" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M33.3018 17.3672C33.3805 17.138 33.5166 16.984 33.71 16.9053C33.9105 16.8265 34.1074 16.8265 34.3008 16.9053C34.4941 16.984 34.6302 17.138 34.709 17.3672L36.7285 23.3936H31.293L33.3018 17.3672ZM38.3721 31.3643C38.2575 31.3714 38.1501 31.3499 38.0498 31.2998C37.9567 31.2568 37.8743 31.196 37.8027 31.1172C37.7383 31.0384 37.6953 30.9417 37.6738 30.8271L36.2236 24.0166L36.374 24.1133H31.6475L31.7871 24.0166L30.3369 30.8271C30.3011 31.0133 30.2008 31.1566 30.0361 31.2568C29.8786 31.3571 29.7067 31.3893 29.5205 31.3535C29.3343 31.3249 29.1875 31.2282 29.0801 31.0635C28.9727 30.9059 28.9368 30.734 28.9727 30.5479L30.4443 23.6406C30.5016 23.3828 30.627 23.168 30.8203 22.9961C31.0137 22.8171 31.2393 22.7275 31.4971 22.7275H36.5137C36.7715 22.7275 36.9971 22.8171 37.1904 22.9961C37.391 23.168 37.5163 23.3864 37.5664 23.6514L39.0381 30.5479C39.0811 30.7699 39.0202 30.9596 38.8555 31.1172C38.6908 31.2819 38.5296 31.3643 38.3721 31.3643ZM34 33.2012C32.5033 33.2012 31.0924 32.9147 29.7676 32.3418C28.4499 31.7689 27.2861 30.9775 26.2764 29.9678C25.2666 28.958 24.4753 27.7943 23.9023 26.4766C23.3294 25.1517 23.043 23.7409 23.043 22.2441C23.043 20.7474 23.3294 19.3402 23.9023 18.0225C24.4753 16.6976 25.263 15.5303 26.2656 14.5205C27.2754 13.5107 28.4391 12.7194 29.7568 12.1465C31.0817 11.5736 32.4925 11.2871 33.9893 11.2871C35.486 11.2871 36.8968 11.5736 38.2217 12.1465C39.5465 12.7194 40.7139 13.5107 41.7236 14.5205C42.7334 15.5303 43.5247 16.6976 44.0977 18.0225C44.6706 19.3402 44.957 20.7474 44.957 22.2441C44.957 23.7409 44.6706 25.1517 44.0977 26.4766C43.5247 27.7943 42.7334 28.958 41.7236 29.9678C40.7139 30.9775 39.5465 31.7689 38.2217 32.3418C36.904 32.9147 35.4967 33.2012 34 33.2012ZM34 31.375C35.2676 31.375 36.4528 31.1387 37.5557 30.666C38.6585 30.1934 39.6289 29.5417 40.4668 28.7109C41.3047 27.873 41.9564 26.9027 42.4219 25.7998C42.8945 24.6969 43.1309 23.5117 43.1309 22.2441C43.1309 20.9766 42.8945 19.7913 42.4219 18.6885C41.9492 17.5856 41.2939 16.6152 40.4561 15.7773C39.6253 14.9395 38.6549 14.2878 37.5449 13.8223C36.4421 13.3496 35.2568 13.1133 33.9893 13.1133C32.7217 13.1133 31.5365 13.3496 30.4336 13.8223C29.3307 14.2878 28.3639 14.9395 27.5332 15.7773C26.7025 16.6152 26.0508 17.5856 25.5781 18.6885C25.1126 19.7913 24.8799 20.9766 24.8799 22.2441C24.8799 23.5117 25.1126 24.6969 25.5781 25.7998C26.0508 26.9027 26.7025 27.873 27.5332 28.7109C28.3711 29.5417 29.3415 30.1934 30.4443 30.666C31.5472 31.1387 32.7324 31.375 34 31.375Z" fill="#E4AF0A"/>
</svg>
    </div>

    <div class="tool muted" aria-label="Карандаш (неактивно)">
      <!-- ЗАМЕТКА/КАРАНДАШ (серый, не активный) -->
      <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3.37305 21.2373C2.25586 21.2373 1.41439 20.958 0.848633 20.3994C0.282878 19.848 0 19.0173 0 17.9072V5.53223C0 4.4222 0.282878 3.59147 0.848633 3.04004C1.41439 2.48145 2.25586 2.20215 3.37305 2.20215H15.5439L13.8145 3.93164H3.40527C2.86816 3.93164 2.4528 4.07487 2.15918 4.36133C1.87272 4.64779 1.72949 5.07031 1.72949 5.62891V17.8213C1.72949 18.3799 1.87272 18.8024 2.15918 19.0889C2.4528 19.3682 2.86816 19.5078 3.40527 19.5078H15.9629C16.3353 19.5078 16.6504 19.3682 16.9082 19.0889C17.1732 18.8024 17.3057 18.3799 17.3057 17.8213V7.50879L19.0352 5.7793V17.9072C19.0352 19.0173 18.7666 19.848 18.2295 20.3994C17.6995 20.958 16.9512 21.2373 15.9844 21.2373H3.37305ZM7.2832 14.2764C7.18294 14.3193 7.08984 14.2979 7.00391 14.2119C6.92513 14.1188 6.90723 14.0257 6.9502 13.9326L7.91699 11.9131L17.9395 1.89062L19.4111 3.34082L9.37793 13.3633L7.2832 14.2764ZM20.2061 2.55664L18.7344 1.07422L19.5186 0.300781C19.6976 0.128906 19.9017 0.0358073 20.1309 0.0214844C20.3672 0.00716146 20.5677 0.0823568 20.7324 0.24707L20.9795 0.504883C21.1657 0.683919 21.2552 0.891602 21.248 1.12793C21.248 1.3571 21.1585 1.56836 20.9795 1.76172L20.2061 2.55664Z" fill="#3C3C43" fill-opacity="0.3"/>
</svg>
    </div>
  </footer>

</body>
<script>
  (function(){
    const sheet = document.querySelector('.sheet');
    const note = document.querySelector('.note');
    const cameraTool = document.querySelector('.tool[aria-label="Камера"]');
    const cameraInput = document.getElementById('camera-input');
    const shareButton = document.querySelector('[data-role="share"]');
    const statusBarMeta = document.getElementById('status-bar-style');
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');

    function applyStatusBarStyle(source){
      if (!statusBarMeta){
        return;
      }
      const isDark = typeof source.matches === 'boolean' ? source.matches : darkScheme.matches;
      statusBarMeta.setAttribute('content', isDark ? 'black' : 'default');
    }

    applyStatusBarStyle(darkScheme);
    if (typeof darkScheme.addEventListener === 'function'){
      darkScheme.addEventListener('change', applyStatusBarStyle);
    } else if (typeof darkScheme.addListener === 'function'){
      darkScheme.addListener(applyStatusBarStyle);
    }

    if (!sheet || !note) {
      return;
    }

    const TEXT_BLOCK_SELECTOR = '.title, .body';

    function createBlock(type){
      const block = document.createElement('div');
      block.classList.add(type);
      block.innerHTML = '';
      return block;
    }

    function ensureBlocks(){
      const children = Array.from(note.children);
      if (!children.length){
        note.appendChild(createBlock('title'));
      }

      let textIndex = 0;
      Array.from(note.children).forEach(child => {
        if (child.classList.contains('photo-block')){
          return;
        }

        const desired = textIndex === 0 ? 'title' : 'body';
        textIndex += 1;

        child.classList.remove('title', 'body');
        child.classList.add(desired);

        if (child.innerHTML === '<br>' || child.innerHTML === '<br />'){
          child.innerHTML = '';
        }
      });

      if (!textIndex){
        note.appendChild(createBlock('title'));
      }
    }

    function placeCaretInside(element){
      const selection = window.getSelection();
      const range = document.createRange();
      range.selectNodeContents(element);
      range.collapse(false);
      selection.removeAllRanges();
      selection.addRange(range);
    }

    function focusEnd(){
      ensureBlocks();
      const textBlocks = Array.from(note.querySelectorAll(TEXT_BLOCK_SELECTOR));
      const target = textBlocks.length ? textBlocks[textBlocks.length - 1] : note;
      note.focus({ preventScroll: true });
      placeCaretInside(target);
    }

    function insertBlockAfter(reference, block){
      if (reference && reference.parentElement === note){
        note.insertBefore(block, reference.nextSibling);
      } else {
        note.appendChild(block);
      }
    }

    function getCurrentBlock(){
      const selection = window.getSelection();
      if (!selection.rangeCount){
        return null;
      }
      const anchorNode = selection.anchorNode instanceof Element ? selection.anchorNode : selection.anchorNode?.parentElement;
      return anchorNode ? anchorNode.closest('.title, .body, .photo-block') : null;
    }

    sheet.addEventListener('pointerdown', event => {
      if (event.target.closest('.note') || event.target.closest('.toolbar')){
        return;
      }
      event.preventDefault();
      focusEnd();
    });

    function hasTypedContent(){
      return Array.from(note.querySelectorAll(TEXT_BLOCK_SELECTOR)).some(block => {
        const text = block.textContent || '';
        return text.replace(/[\s\u200B]+/g, '').length > 0;
      });
    }

    function hasMediaContent(){
      return !!note.querySelector('.photo-block');
    }

    function updateShareState(){
      if (!shareButton){
        return;
      }
      const active = hasTypedContent() || hasMediaContent();
      shareButton.classList.toggle('muted', !active);
      shareButton.setAttribute('aria-disabled', active ? 'false' : 'true');
    }

    note.addEventListener('focus', () => {
      ensureBlocks();
      updateShareState();
    });
    ensureBlocks();
    updateShareState();

    note.addEventListener('keydown', event => {
      if (event.key === 'Enter' && !event.shiftKey){
        event.preventDefault();
        const currentBlock = getCurrentBlock();
        const newBlock = createBlock('body');
        insertBlockAfter(currentBlock, newBlock);
        note.focus({ preventScroll: true });
        placeCaretInside(newBlock);
        ensureBlocks();
        updateShareState();
      }
    });

    note.addEventListener('input', () => {
      ensureBlocks();
      updateShareState();
    });

    cameraTool?.addEventListener('click', () => {
      note.focus({ preventScroll: true });
      cameraInput?.click();
    });

    cameraInput?.addEventListener('change', () => {
      const file = cameraInput.files && cameraInput.files[0];
      if (!file){
        return;
      }

      const reader = new FileReader();
      reader.addEventListener('load', () => {
        const block = document.createElement('div');
        block.className = 'photo-block';
        const img = document.createElement('img');
        img.src = String(reader.result);
        img.alt = 'Добавленное фото';
        block.appendChild(img);

        const currentBlock = getCurrentBlock();
        insertBlockAfter(currentBlock, block);

        ensureBlocks();
        updateShareState();

        let nextEditable = block.nextElementSibling;
        while (nextEditable && nextEditable.classList.contains('photo-block')){
          nextEditable = nextEditable.nextElementSibling;
        }

        if (!nextEditable){
          nextEditable = createBlock('body');
          note.insertBefore(nextEditable, block.nextSibling);
        }

        note.focus({ preventScroll: true });
        placeCaretInside(nextEditable);
      });

      reader.readAsDataURL(file);
      cameraInput.value = '';
    });
  })();
</script>
</body>
</html>
