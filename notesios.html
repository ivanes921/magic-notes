<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,maximum-scale=1,user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" id="status-bar-style" />
  <title>Заметка</title>
  <style>
    :root{
      --bg: #ffffff;
      --text: #1c1c1e;
      --muted-icon: rgba(60,60,67,.30);      /* iOS grey (light) */
      --safe-t: env(safe-area-inset-top, 0px);
      --safe-b: env(safe-area-inset-bottom, 0px);
      --safe-l: env(safe-area-inset-left, 0px);
      --safe-r: env(safe-area-inset-right, 0px);
      --bar-h: 66px;                         /* высота топ-бара */
      --tool-h: 54px;                        /* высота нижней панели */
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg: #000000;
        --text: #f2f2f7;
        --muted-icon: rgba(235,235,245,.55); /* iOS grey (dark) */
      }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      background:var(--bg);
      color: var(--text);
      font:16px/1 -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Верхняя панель */
    .topbar{
      position:sticky; top:0; z-index:10;
      height: calc(var(--bar-h) + var(--safe-t));
      padding-top: var(--safe-t);
      display:flex; align-items:center; justify-content:space-between;
      padding-left: calc(24px + var(--safe-l));
      padding-right: calc(8px + var(--safe-r));
      background: transparent;
    }
    .left, .right{ display:flex; align-items:center; }
    .right{ gap:7px; }
    .left .hit{ justify-content:flex-start; padding-left:14px; }
    .hit{ width:66px; height:66px; display:flex; align-items:center; justify-content:center; }

    /* Поле «листа» */
    .sheet{
      min-height: calc(100vh - var(--bar-h) - var(--tool-h) - var(--safe-t) - var(--safe-b));
      padding: 8px calc(12px + var(--safe-r)) 8px calc(24px + var(--safe-l));
      cursor: text;
    }

    .note{
      min-height: calc(100vh - var(--bar-h) - var(--tool-h) - var(--safe-t) - var(--safe-b) - 16px);
      outline: none;
      caret-color: #E4AF0A;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .note .title,
    .note .body{
      min-height: 1.2em;
      white-space: pre-wrap;
    }

    .note .title{
      font-size: 32px;
      font-weight: 700;
      line-height: 1.1;
      letter-spacing: -0.02em;
    }

    .note .body{
      font-size: 18px;
      line-height: 1.35;
    }

    .note .photo-block{
      border-radius: 12px;
      overflow: hidden;
      align-self: flex-start;
      max-width: 100%;
    }

    .note .photo-block img{
      display: block;
      width: 100%;
      height: auto;
    }

    /* Нижняя панель инструментов */
    .toolbar{
      position:fixed; left:0; right:0; bottom:0; z-index:10;
      height: calc(var(--tool-h) + var(--safe-b));
      padding: 4px calc(12px + var(--safe-r)) calc(8px + var(--safe-b)) calc(12px + var(--safe-l));
      display:flex; align-items:flex-end; justify-content:space-between;
      background: transparent;
    }
    .tool{ width:68px; height:44px; display:flex; align-items:center; justify-content:center; }

    /* Перекрашиваем «пассивные» иконки в зависимости от темы */
    .muted *{ fill: var(--muted-icon) !important; }

    /* Адаптивность для узких экранов */
    @media (max-width: 380px){
      .tool{ width:56px; }
    }
  </style>
</head>
<body>

  <!-- ВЕРХ -->
  <header class="topbar" role="navigation" aria-label="Навигация">
    <div class="left">
      <div class="hit" aria-label="Назад">
        <!-- НАЗАД (жёлтый) -->
        <!-- source: твой файл -->
        <svg width="71" height="28" viewBox="0 0 71 28" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M1.28906 14.2441C1.29622 14.0221 1.33919 13.818 1.41797 13.6318C1.50391 13.4456 1.63281 13.2666 1.80469 13.0947L10.0762 5.00586C10.3483 4.73372 10.6813 4.59766 11.0752 4.59766C11.3473 4.59766 11.5908 4.66211 11.8057 4.79102C12.0277 4.91992 12.2031 5.09538 12.332 5.31738C12.4681 5.53223 12.5361 5.77214 12.5361 6.03711C12.5361 6.43815 12.3857 6.78906 12.085 7.08984L4.72656 14.2441L12.085 21.3984C12.3857 21.7064 12.5361 22.0573 12.5361 22.4512C12.5361 22.7233 12.4681 22.9668 12.332 23.1816C12.2031 23.3965 12.0277 23.5684 11.8057 23.6973C11.5908 23.8262 11.3473 23.8906 11.0752 23.8906C10.6813 23.8906 10.3483 23.7546 10.0762 23.4824L1.80469 15.3936C1.62565 15.2217 1.49316 15.0426 1.40723 14.8564C1.32845 14.6631 1.28906 14.459 1.28906 14.2441Z" fill="#E4AF0A"/>
<path d="M22.6104 20V8.02197H24.1045V13.2017H30.6787V8.02197H32.1729V20H30.6787V14.5464H24.1045V20H22.6104ZM37.238 20.1577C36.6735 20.1577 36.1644 20.0498 35.7106 19.834C35.2624 19.6182 34.9054 19.311 34.6398 18.9126C34.3797 18.5142 34.2497 18.0438 34.2497 17.5015V17.4849C34.2497 16.9536 34.377 16.4998 34.6315 16.1235C34.8861 15.7417 35.2568 15.4429 35.7438 15.2271C36.2308 15.0112 36.8202 14.884 37.5119 14.8452L40.799 14.646V15.7998L37.6862 15.999C37.0055 16.0378 36.5075 16.1789 36.1921 16.4224C35.8822 16.6659 35.7272 17.009 35.7272 17.4517V17.4683C35.7272 17.922 35.8988 18.2762 36.2419 18.5308C36.585 18.7798 37.0166 18.9043 37.5368 18.9043C38.0293 18.9043 38.4665 18.8075 38.8483 18.6138C39.2302 18.4146 39.529 18.1462 39.7448 17.8086C39.9662 17.471 40.0768 17.0892 40.0768 16.6631V13.874C40.0768 13.3206 39.9081 12.9001 39.5705 12.6123C39.2385 12.319 38.7376 12.1724 38.068 12.1724C37.5313 12.1724 37.0913 12.2692 36.7482 12.4629C36.4051 12.651 36.1755 12.9194 36.0593 13.2681L36.051 13.293H34.6066L34.6149 13.2432C34.6924 12.7728 34.8861 12.3633 35.196 12.0146C35.5114 11.6605 35.9181 11.3866 36.4162 11.1929C36.9142 10.9937 37.4815 10.894 38.1179 10.894C38.8483 10.894 39.4653 11.013 39.9689 11.251C40.478 11.4889 40.8626 11.832 41.1227 12.2803C41.3884 12.723 41.5212 13.2542 41.5212 13.874V20H40.0768V18.6802H39.944C39.7559 18.9956 39.5262 19.264 39.2551 19.4854C38.9894 19.7067 38.6878 19.8755 38.3503 19.9917C38.0127 20.1024 37.6419 20.1577 37.238 20.1577ZM46.9349 20.166C46.2985 20.166 45.723 20.0664 45.2084 19.8672C44.6992 19.668 44.2842 19.3913 43.9632 19.0371C43.6423 18.6774 43.4514 18.2568 43.3905 17.7754L43.3822 17.709H44.8514L44.868 17.7754C44.9621 18.1406 45.1945 18.4312 45.5653 18.647C45.9361 18.8628 46.3926 18.9707 46.9349 18.9707C47.5934 18.9707 48.1081 18.8268 48.4789 18.5391C48.8496 18.2513 49.035 17.8861 49.035 17.4434V17.4268C49.035 16.9398 48.8552 16.5828 48.4955 16.356C48.1413 16.1235 47.6211 16.0073 46.9349 16.0073H45.5404V14.812H46.9349C47.5104 14.812 47.9504 14.6986 48.2547 14.4717C48.5646 14.2393 48.7196 13.8906 48.7196 13.4258V13.4092C48.7196 13.0273 48.5729 12.7119 48.2796 12.4629C47.9919 12.2083 47.5602 12.0811 46.9847 12.0811C46.4756 12.0811 46.044 12.1862 45.6898 12.3965C45.3356 12.6068 45.1226 12.8918 45.0506 13.2515L45.0423 13.293H43.6312L43.6395 13.2349C43.7115 12.7534 43.8941 12.3384 44.1874 11.9897C44.4862 11.6356 44.8736 11.3644 45.3495 11.1763C45.8309 10.9826 46.376 10.8857 46.9847 10.8857C47.6543 10.8857 48.2215 10.9881 48.6864 11.1929C49.1568 11.3976 49.5137 11.6826 49.7572 12.0479C50.0062 12.4076 50.1307 12.8254 50.1307 13.3013V13.3179C50.1307 13.7716 49.9951 14.1812 49.724 14.5464C49.4528 14.9116 49.0959 15.1468 48.6532 15.252V15.3848C49.0461 15.4678 49.3754 15.6006 49.641 15.7832C49.9121 15.9658 50.1141 16.1899 50.2469 16.4556C50.3853 16.7212 50.4545 17.02 50.4545 17.3521V17.3687C50.4545 17.922 50.305 18.409 50.0062 18.8296C49.7129 19.2502 49.3006 19.5794 48.7694 19.8174C48.2437 20.0498 47.6322 20.166 46.9349 20.166ZM54.8887 20.1577C54.3243 20.1577 53.8151 20.0498 53.3614 19.834C52.9131 19.6182 52.5562 19.311 52.2906 18.9126C52.0305 18.5142 51.9004 18.0438 51.9004 17.5015V17.4849C51.9004 16.9536 52.0277 16.4998 52.2823 16.1235C52.5368 15.7417 52.9076 15.4429 53.3946 15.2271C53.8815 15.0112 54.4709 14.884 55.1626 14.8452L58.4497 14.646V15.7998L55.337 15.999C54.6563 16.0378 54.1582 16.1789 53.8428 16.4224C53.5329 16.6659 53.378 17.009 53.378 17.4517V17.4683C53.378 17.922 53.5495 18.2762 53.8926 18.5308C54.2357 18.7798 54.6674 18.9043 55.1875 18.9043C55.6801 18.9043 56.1172 18.8075 56.4991 18.6138C56.8809 18.4146 57.1797 18.1462 57.3955 17.8086C57.6169 17.471 57.7276 17.0892 57.7276 16.6631V13.874C57.7276 13.3206 57.5588 12.9001 57.2212 12.6123C56.8892 12.319 56.3884 12.1724 55.7188 12.1724C55.182 12.1724 54.7421 12.2692 54.399 12.4629C54.0559 12.651 53.8262 12.9194 53.71 13.2681L53.7017 13.293H52.2574L52.2657 13.2432C52.3431 12.7728 52.5368 12.3633 52.8467 12.0146C53.1621 11.6605 53.5689 11.3866 54.0669 11.1929C54.565 10.9937 55.1322 10.894 55.7686 10.894C56.4991 10.894 57.1161 11.013 57.6197 11.251C58.1288 11.4889 58.5134 11.832 58.7735 12.2803C59.0391 12.723 59.1719 13.2542 59.1719 13.874V20H57.7276V18.6802H57.5948C57.4066 18.9956 57.177 19.264 56.9058 19.4854C56.6402 19.7067 56.3386 19.8755 56.001 19.9917C55.6634 20.1024 55.2927 20.1577 54.8887 20.1577ZM61.7468 22.3657H60.4021V18.8047H61.1491C61.4756 18.5889 61.7247 18.2264 61.8962 17.7173C62.0678 17.2026 62.1729 16.6437 62.2116 16.0405L62.5603 11.0518H68.6613V18.8047H70.0891V22.3657H68.7444V20H61.7468V22.3657ZM67.217 18.8047V12.2471H63.8386L63.5564 16.0737C63.5176 16.616 63.4374 17.1169 63.3156 17.5762C63.1939 18.0299 63.0279 18.3952 62.8176 18.6719V18.8047H67.217Z" fill="#E4AF0A"/>
</svg>
      </div>
    </div>

    <div class="right">
      <div class="hit muted" data-role="share" aria-label="Поделиться" aria-disabled="true">
        <!-- Поделиться -->
        <svg width="25" height="44" viewBox="0 0 25 44" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.33398 33.7705C5.20964 33.7705 4.36458 33.4912 3.79883 32.9326C3.24023 32.3812 2.96094 31.5505 2.96094 30.4404V19.8379C2.96094 18.7279 3.24023 17.8971 3.79883 17.3457C4.36458 16.7871 5.20964 16.5078 6.33398 16.5078H9.62109V18.2373H6.35547C5.81836 18.2373 5.40658 18.3805 5.12012 18.667C4.83366 18.9463 4.69043 19.3652 4.69043 19.9238V30.3545C4.69043 30.9131 4.83366 31.332 5.12012 31.6113C5.40658 31.8978 5.81836 32.041 6.35547 32.041H18.623C19.153 32.041 19.5648 31.8978 19.8584 31.6113C20.152 31.332 20.2988 30.9131 20.2988 30.3545V19.9238C20.2988 19.3652 20.152 18.9463 19.8584 18.667C19.5648 18.3805 19.153 18.2373 18.623 18.2373H15.3574V16.5078H18.6553C19.7796 16.5078 20.6211 16.7871 21.1797 17.3457C21.7454 17.8971 22.0283 18.7279 22.0283 19.8379V30.4404C22.0283 31.5505 21.7454 32.3812 21.1797 32.9326C20.6211 33.4912 19.7796 33.7705 18.6553 33.7705H6.33398ZM12.4893 25.3486C12.2601 25.3486 12.0596 25.2663 11.8877 25.1016C11.723 24.9368 11.6406 24.7435 11.6406 24.5215V13.5859L11.7051 11.9854L11.1035 12.6191L9.43848 14.3916C9.28809 14.5635 9.09115 14.6494 8.84766 14.6494C8.62565 14.6494 8.43945 14.5778 8.28906 14.4346C8.14583 14.2913 8.07422 14.1123 8.07422 13.8975C8.07422 13.6898 8.16016 13.5 8.33203 13.3281L11.8662 9.91211C11.9808 9.80469 12.0846 9.73307 12.1777 9.69727C12.278 9.6543 12.3818 9.63281 12.4893 9.63281C12.6038 9.63281 12.7077 9.6543 12.8008 9.69727C12.901 9.73307 13.0049 9.80469 13.1123 9.91211L16.6572 13.3281C16.8219 13.5 16.9043 13.6898 16.9043 13.8975C16.9043 14.1123 16.8291 14.2913 16.6787 14.4346C16.5283 14.5778 16.3421 14.6494 16.1201 14.6494C15.8838 14.6494 15.6904 14.5635 15.54 14.3916L13.8857 12.6191L13.2842 11.9854L13.3486 13.5859V24.5215C13.3486 24.7435 13.2627 24.9368 13.0908 25.1016C12.9261 25.2663 12.7256 25.3486 12.4893 25.3486Z" fill="#E4AF0A"/>
</svg>

      </div>
      <div class="hit" aria-label="Меню">
        <svg width="25" height="44" viewBox="0 0 25 44" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12.5 33.2012C10.9889 33.2012 9.57096 32.9147 8.24609 32.3418C6.92122 31.776 5.75749 30.9919 4.75488 29.9893C3.75228 28.9867 2.96452 27.8229 2.3916 26.498C1.82585 25.1732 1.54297 23.7552 1.54297 22.2441C1.54297 20.7331 1.82585 19.3151 2.3916 17.9902C2.96452 16.6654 3.75228 15.5016 4.75488 14.499C5.75749 13.4893 6.92122 12.7015 8.24609 12.1357C9.57096 11.57 10.9889 11.2871 12.5 11.2871C14.0111 11.2871 15.429 11.57 16.7539 12.1357C18.0788 12.7015 19.2425 13.4893 20.2451 14.499C21.2477 15.5016 22.0319 16.6654 22.5977 17.9902C23.1706 19.3151 23.457 20.7331 23.457 22.2441C23.457 23.7552 23.1706 25.1732 22.5977 26.498C22.0319 27.8229 21.2477 28.9867 20.2451 29.9893C19.2425 30.9919 18.0788 31.776 16.7539 32.3418C15.429 32.9147 14.0111 33.2012 12.5 33.2012ZM12.5 31.375C13.7604 31.375 14.9421 31.1387 16.0449 30.666C17.1478 30.1934 18.1182 29.5381 18.9561 28.7002C19.7939 27.8623 20.4492 26.8919 20.9219 25.7891C21.3945 24.6862 21.6309 23.5046 21.6309 22.2441C21.6309 20.9837 21.3945 19.8021 20.9219 18.6992C20.4492 17.5892 19.7939 16.6188 18.9561 15.7881C18.1182 14.9502 17.1478 14.2949 16.0449 13.8223C14.9421 13.3496 13.7604 13.1133 12.5 13.1133C11.2396 13.1133 10.0579 13.3496 8.95508 13.8223C7.85221 14.2949 6.88184 14.9502 6.04395 15.7881C5.20605 16.6188 4.55078 17.5892 4.07812 18.6992C3.60547 19.8021 3.36914 20.9837 3.36914 22.2441C3.36914 23.5046 3.60547 24.6862 4.07812 25.7891C4.55078 26.8919 5.20605 27.8623 6.04395 28.7002C6.88184 29.5381 7.85221 30.1934 8.95508 30.666C10.0579 31.1387 11.2396 31.375 12.5 31.375ZM7.4834 23.791C7.05371 23.791 6.6849 23.6406 6.37695 23.3398C6.07617 23.0319 5.92578 22.6631 5.92578 22.2334C5.92578 21.8037 6.07617 21.4385 6.37695 21.1377C6.6849 20.8298 7.05371 20.6758 7.4834 20.6758C7.90592 20.6758 8.27116 20.8298 8.5791 21.1377C8.88704 21.4385 9.04102 21.8037 9.04102 22.2334C9.04102 22.6631 8.88704 23.0319 8.5791 23.3398C8.27832 23.6406 7.91309 23.791 7.4834 23.791ZM12.4893 23.791C12.0667 23.791 11.7015 23.6406 11.3936 23.3398C11.0928 23.0319 10.9424 22.6631 10.9424 22.2334C10.9424 21.8037 11.0928 21.4385 11.3936 21.1377C11.7015 20.8298 12.0667 20.6758 12.4893 20.6758C12.9189 20.6758 13.2842 20.8298 13.585 21.1377C13.8929 21.4385 14.0469 21.8037 14.0469 22.2334C14.0469 22.6631 13.8929 23.0319 13.585 23.3398C13.2842 23.6406 12.9189 23.791 12.4893 23.791ZM17.5059 23.791C17.0762 23.791 16.7074 23.6406 16.3994 23.3398C16.0986 23.0319 15.9482 22.6631 15.9482 22.2334C15.9482 21.8037 16.0986 21.4385 16.3994 21.1377C16.7074 20.8298 17.0762 20.6758 17.5059 20.6758C17.9355 20.6758 18.3008 20.8298 18.6016 21.1377C18.9095 21.4385 19.0635 21.8037 19.0635 22.2334C19.0635 22.6631 18.9095 23.0319 18.6016 23.3398C18.3008 23.6406 17.9355 23.791 17.5059 23.791Z" fill="#E4AF0A"/>
</svg>
      </div>
    </div>
  </header>

  <!-- ЛИСТ -->
  <div class="sheet" aria-label="Лист заметки">
    <div class="note" contenteditable="true" role="textbox" aria-multiline="true" aria-label="Текст заметки" spellcheck="false">
      <div class="title"></div>
    </div>
  </div>

  <input type="file" accept="image/*" capture="environment" id="camera-input" style="display:none" aria-hidden="true" />

  <!-- НИЗ -->
  <footer class="toolbar" role="toolbar" aria-label="Панель инструментов">
    <div class="tool" aria-label="Пункты">
      <!-- ПУНКТЫ (жёлтый) -->
      <svg width="25" height="22" viewBox="0 0 25 22" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4.62988 21.6992C3.79199 21.6992 3.02214 21.488 2.32031 21.0654C1.61849 20.6429 1.05632 20.0807 0.633789 19.3789C0.211263 18.6771 0 17.9072 0 17.0693C0 16.2243 0.207682 15.4508 0.623047 14.749C1.04557 14.0472 1.60775 13.485 2.30957 13.0625C3.01139 12.64 3.78483 12.4287 4.62988 12.4287C5.47493 12.4287 6.24479 12.64 6.93945 13.0625C7.64128 13.4779 8.20345 14.0365 8.62598 14.7383C9.0485 15.4401 9.25977 16.2171 9.25977 17.0693C9.25977 17.9072 9.0485 18.6771 8.62598 19.3789C8.20345 20.0807 7.64128 20.6429 6.93945 21.0654C6.24479 21.488 5.47493 21.6992 4.62988 21.6992ZM4.62988 20.1309C5.18132 20.1309 5.68978 19.9912 6.15527 19.7119C6.62077 19.4326 6.99316 19.0602 7.27246 18.5947C7.55176 18.1292 7.69141 17.6208 7.69141 17.0693C7.69141 16.5107 7.55176 15.9987 7.27246 15.5332C6.99316 15.0677 6.62077 14.6953 6.15527 14.416C5.68978 14.1367 5.18132 13.9971 4.62988 13.9971C4.07845 13.9971 3.56999 14.1367 3.10449 14.416C2.639 14.6953 2.2666 15.0677 1.9873 15.5332C1.70801 15.9987 1.56836 16.5107 1.56836 17.0693C1.56836 17.6208 1.70801 18.1292 1.9873 18.5947C2.2666 19.0602 2.639 19.4326 3.10449 19.7119C3.56999 19.9912 4.07845 20.1309 4.62988 20.1309ZM12.5254 5.51074C12.2819 5.51074 12.0742 5.42839 11.9023 5.26367C11.7376 5.0918 11.6553 4.88411 11.6553 4.64062C11.6553 4.39714 11.7376 4.19303 11.9023 4.02832C12.0742 3.86361 12.2819 3.78125 12.5254 3.78125H23.2031C23.4466 3.78125 23.6543 3.86361 23.8262 4.02832C23.998 4.19303 24.084 4.39714 24.084 4.64062C24.084 4.88411 23.998 5.0918 23.8262 5.26367C23.6543 5.42839 23.4466 5.51074 23.2031 5.51074H12.5254ZM12.5254 17.9287C12.2819 17.9287 12.0742 17.8464 11.9023 17.6816C11.7376 17.5098 11.6553 17.3057 11.6553 17.0693C11.6553 16.8258 11.7376 16.6217 11.9023 16.457C12.0742 16.2852 12.2819 16.1992 12.5254 16.1992H23.2031C23.4466 16.1992 23.6543 16.2852 23.8262 16.457C23.998 16.6217 24.084 16.8258 24.084 17.0693C24.084 17.3057 23.998 17.5098 23.8262 17.6816C23.6543 17.8464 23.4466 17.9287 23.2031 17.9287H12.5254ZM4.62988 9.27051C3.79199 9.27051 3.02214 9.05924 2.32031 8.63672C1.61849 8.21419 1.05632 7.65202 0.633789 6.9502C0.211263 6.24837 0 5.47493 0 4.62988C0 3.78483 0.207682 3.01139 0.623047 2.30957C1.04557 1.60775 1.60775 1.04915 2.30957 0.633789C3.01139 0.211263 3.78483 0 4.62988 0C5.47493 0 6.24479 0.211263 6.93945 0.633789C7.64128 1.04915 8.20345 1.60775 8.62598 2.30957C9.0485 3.01139 9.25977 3.78483 9.25977 4.62988C9.25977 5.47493 9.0485 6.24837 8.62598 6.9502C8.20345 7.65202 7.64128 8.21419 6.93945 8.63672C6.24479 9.05924 5.47493 9.27051 4.62988 9.27051ZM4.08203 7.12207C4.31836 7.12207 4.50098 7.02181 4.62988 6.82129L6.875 3.29785C6.9681 3.14746 7.01465 3.00065 7.01465 2.85742C7.01465 2.72135 6.95736 2.60319 6.84277 2.50293C6.73535 2.40267 6.60645 2.35254 6.45605 2.35254C6.2627 2.35254 6.10156 2.4528 5.97266 2.65332L4.06055 5.72559L3.22266 4.66211C3.15104 4.56901 3.07585 4.50098 2.99707 4.45801C2.92546 4.41504 2.83594 4.39355 2.72852 4.39355C2.58529 4.39355 2.45996 4.44727 2.35254 4.55469C2.25228 4.66211 2.20215 4.7946 2.20215 4.95215C2.20215 5.11686 2.2487 5.25651 2.3418 5.37109L3.54492 6.82129C3.6237 6.91439 3.70247 6.98958 3.78125 7.04688C3.86719 7.09701 3.96745 7.12207 4.08203 7.12207Z" fill="#E4AF0A"/>
</svg>
</div>

    <div class="tool" aria-label="Камера">
      <!-- КАМЕРА (жёлтый) -->
      <svg width="68" height="44" viewBox="0 0 68 44" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M24.1816 32.1484C23.0573 32.1484 22.2122 31.8691 21.6465 31.3105C21.0879 30.7591 20.8086 29.9284 20.8086 28.8184V17.5713C20.8086 16.4684 21.0879 15.6413 21.6465 15.0898C22.2122 14.5312 23.0573 14.252 24.1816 14.252H27.1787C27.6012 14.252 27.9128 14.2018 28.1133 14.1016C28.3138 13.9941 28.5322 13.8079 28.7686 13.543L29.6279 12.5762C29.9001 12.2826 30.1937 12.057 30.5088 11.8994C30.8311 11.7419 31.2679 11.6631 31.8193 11.6631H36.1055C36.6569 11.6631 37.0938 11.7419 37.416 11.8994C37.7383 12.057 38.0319 12.2826 38.2969 12.5762L39.1562 13.543C39.321 13.722 39.4678 13.8652 39.5967 13.9727C39.7327 14.0729 39.8867 14.1445 40.0586 14.1875C40.2305 14.2305 40.4596 14.252 40.7461 14.252H43.8184C44.9355 14.252 45.777 14.5312 46.3428 15.0898C46.9085 15.6413 47.1914 16.4684 47.1914 17.5713V28.8184C47.1914 29.9284 46.9085 30.7591 46.3428 31.3105C45.777 31.8691 44.9355 32.1484 43.8184 32.1484H24.1816ZM24.2031 30.4189H43.7861C44.3161 30.4189 44.7279 30.2793 45.0215 30C45.3151 29.7135 45.4619 29.291 45.4619 28.7324V17.668C45.4619 17.1094 45.3151 16.6904 45.0215 16.4111C44.7279 16.1247 44.3161 15.9814 43.7861 15.9814H40.3164C39.8294 15.9814 39.4355 15.9277 39.1348 15.8203C38.8411 15.7057 38.5583 15.498 38.2861 15.1973L37.4482 14.252C37.1403 13.9082 36.8682 13.679 36.6318 13.5645C36.3955 13.4499 36.041 13.3926 35.5684 13.3926H32.3564C31.8838 13.3926 31.5293 13.4499 31.293 13.5645C31.0566 13.679 30.7845 13.9082 30.4766 14.252L29.6387 15.1973C29.3665 15.498 29.0801 15.7057 28.7793 15.8203C28.4857 15.9277 28.0954 15.9814 27.6084 15.9814H24.2031C23.6732 15.9814 23.2614 16.1247 22.9678 16.4111C22.6813 16.6904 22.5381 17.1094 22.5381 17.668V28.7324C22.5381 29.291 22.6813 29.7135 22.9678 30C23.2614 30.2793 23.6732 30.4189 24.2031 30.4189ZM34 28.8721C33.1836 28.8721 32.4209 28.7217 31.7119 28.4209C31.0029 28.1201 30.3799 27.7012 29.8428 27.1641C29.3128 26.627 28.8939 26.0039 28.5859 25.2949C28.2852 24.5859 28.1348 23.8197 28.1348 22.9961C28.1348 22.1797 28.2852 21.417 28.5859 20.708C28.8939 19.999 29.3128 19.376 29.8428 18.8389C30.3799 18.3018 31.0029 17.8828 31.7119 17.582C32.4209 17.2812 33.1836 17.1309 34 17.1309C35.0814 17.1309 36.0661 17.3923 36.9541 17.915C37.8421 18.4378 38.5475 19.1432 39.0703 20.0312C39.5931 20.9193 39.8545 21.9076 39.8545 22.9961C39.8545 23.8197 39.7041 24.5859 39.4033 25.2949C39.1025 26.0039 38.6836 26.627 38.1465 27.1641C37.6094 27.7012 36.9863 28.1201 36.2773 28.4209C35.5684 28.7217 34.8092 28.8721 34 28.8721ZM34 27.2393C34.7806 27.2393 35.4896 27.0495 36.127 26.6699C36.7715 26.2904 37.2835 25.7819 37.6631 25.1445C38.0426 24.5 38.2324 23.7839 38.2324 22.9961C38.2324 22.2155 38.0426 21.5065 37.6631 20.8691C37.2835 20.2246 36.7715 19.7126 36.127 19.333C35.4896 18.9463 34.7806 18.7529 34 18.7529C33.2194 18.7529 32.5068 18.9463 31.8623 19.333C31.2249 19.7126 30.7129 20.2246 30.3262 20.8691C29.9466 21.5065 29.7568 22.2155 29.7568 22.9961C29.7568 23.7839 29.9466 24.5 30.3262 25.1445C30.7129 25.7819 31.2249 26.2904 31.8623 26.6699C32.5068 27.0495 33.2194 27.2393 34 27.2393ZM40.2949 19.043C40.2949 18.6849 40.4274 18.3734 40.6924 18.1084C40.9574 17.8434 41.276 17.7109 41.6484 17.7109C42.0065 17.7109 42.318 17.8434 42.583 18.1084C42.848 18.3734 42.9805 18.6849 42.9805 19.043C42.9805 19.4154 42.848 19.7305 42.583 19.9883C42.318 20.2461 42.0065 20.375 41.6484 20.375C41.276 20.375 40.9574 20.2497 40.6924 19.999C40.4274 19.7412 40.2949 19.4225 40.2949 19.043Z" fill="#E4AF0A"/>
</svg>
    </div>

    <div class="tool" aria-label="Маркер">
      <!-- МАРКЕР (жёлтый) -->
      <svg width="68" height="44" viewBox="0 0 68 44" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M33.3018 17.3672C33.3805 17.138 33.5166 16.984 33.71 16.9053C33.9105 16.8265 34.1074 16.8265 34.3008 16.9053C34.4941 16.984 34.6302 17.138 34.709 17.3672L36.7285 23.3936H31.293L33.3018 17.3672ZM38.3721 31.3643C38.2575 31.3714 38.1501 31.3499 38.0498 31.2998C37.9567 31.2568 37.8743 31.196 37.8027 31.1172C37.7383 31.0384 37.6953 30.9417 37.6738 30.8271L36.2236 24.0166L36.374 24.1133H31.6475L31.7871 24.0166L30.3369 30.8271C30.3011 31.0133 30.2008 31.1566 30.0361 31.2568C29.8786 31.3571 29.7067 31.3893 29.5205 31.3535C29.3343 31.3249 29.1875 31.2282 29.0801 31.0635C28.9727 30.9059 28.9368 30.734 28.9727 30.5479L30.4443 23.6406C30.5016 23.3828 30.627 23.168 30.8203 22.9961C31.0137 22.8171 31.2393 22.7275 31.4971 22.7275H36.5137C36.7715 22.7275 36.9971 22.8171 37.1904 22.9961C37.391 23.168 37.5163 23.3864 37.5664 23.6514L39.0381 30.5479C39.0811 30.7699 39.0202 30.9596 38.8555 31.1172C38.6908 31.2819 38.5296 31.3643 38.3721 31.3643ZM34 33.2012C32.5033 33.2012 31.0924 32.9147 29.7676 32.3418C28.4499 31.7689 27.2861 30.9775 26.2764 29.9678C25.2666 28.958 24.4753 27.7943 23.9023 26.4766C23.3294 25.1517 23.043 23.7409 23.043 22.2441C23.043 20.7474 23.3294 19.3402 23.9023 18.0225C24.4753 16.6976 25.263 15.5303 26.2656 14.5205C27.2754 13.5107 28.4391 12.7194 29.7568 12.1465C31.0817 11.5736 32.4925 11.2871 33.9893 11.2871C35.486 11.2871 36.8968 11.5736 38.2217 12.1465C39.5465 12.7194 40.7139 13.5107 41.7236 14.5205C42.7334 15.5303 43.5247 16.6976 44.0977 18.0225C44.6706 19.3402 44.957 20.7474 44.957 22.2441C44.957 23.7409 44.6706 25.1517 44.0977 26.4766C43.5247 27.7943 42.7334 28.958 41.7236 29.9678C40.7139 30.9775 39.5465 31.7689 38.2217 32.3418C36.904 32.9147 35.4967 33.2012 34 33.2012ZM34 31.375C35.2676 31.375 36.4528 31.1387 37.5557 30.666C38.6585 30.1934 39.6289 29.5417 40.4668 28.7109C41.3047 27.873 41.9564 26.9027 42.4219 25.7998C42.8945 24.6969 43.1309 23.5117 43.1309 22.2441C43.1309 20.9766 42.8945 19.7913 42.4219 18.6885C41.9492 17.5856 41.2939 16.6152 40.4561 15.7773C39.6253 14.9395 38.6549 14.2878 37.5449 13.8223C36.4421 13.3496 35.2568 13.1133 33.9893 13.1133C32.7217 13.1133 31.5365 13.3496 30.4336 13.8223C29.3307 14.2878 28.3639 14.9395 27.5332 15.7773C26.7025 16.6152 26.0508 17.5856 25.5781 18.6885C25.1126 19.7913 24.8799 20.9766 24.8799 22.2441C24.8799 23.5117 25.1126 24.6969 25.5781 25.7998C26.0508 26.9027 26.7025 27.873 27.5332 28.7109C28.3711 29.5417 29.3415 30.1934 30.4443 30.666C31.5472 31.1387 32.7324 31.375 34 31.375Z" fill="#E4AF0A"/>
</svg>
    </div>

    <div class="tool muted" aria-label="Карандаш (неактивно)">
      <!-- ЗАМЕТКА/КАРАНДАШ (серый, не активный) -->
      <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3.37305 21.2373C2.25586 21.2373 1.41439 20.958 0.848633 20.3994C0.282878 19.848 0 19.0173 0 17.9072V5.53223C0 4.4222 0.282878 3.59147 0.848633 3.04004C1.41439 2.48145 2.25586 2.20215 3.37305 2.20215H15.5439L13.8145 3.93164H3.40527C2.86816 3.93164 2.4528 4.07487 2.15918 4.36133C1.87272 4.64779 1.72949 5.07031 1.72949 5.62891V17.8213C1.72949 18.3799 1.87272 18.8024 2.15918 19.0889C2.4528 19.3682 2.86816 19.5078 3.40527 19.5078H15.9629C16.3353 19.5078 16.6504 19.3682 16.9082 19.0889C17.1732 18.8024 17.3057 18.3799 17.3057 17.8213V7.50879L19.0352 5.7793V17.9072C19.0352 19.0173 18.7666 19.848 18.2295 20.3994C17.6995 20.958 16.9512 21.2373 15.9844 21.2373H3.37305ZM7.2832 14.2764C7.18294 14.3193 7.08984 14.2979 7.00391 14.2119C6.92513 14.1188 6.90723 14.0257 6.9502 13.9326L7.91699 11.9131L17.9395 1.89062L19.4111 3.34082L9.37793 13.3633L7.2832 14.2764ZM20.2061 2.55664L18.7344 1.07422L19.5186 0.300781C19.6976 0.128906 19.9017 0.0358073 20.1309 0.0214844C20.3672 0.00716146 20.5677 0.0823568 20.7324 0.24707L20.9795 0.504883C21.1657 0.683919 21.2552 0.891602 21.248 1.12793C21.248 1.3571 21.1585 1.56836 20.9795 1.76172L20.2061 2.55664Z" fill="#3C3C43" fill-opacity="0.3"/>
</svg>
    </div>
  </footer>

</body>
<script>
  (function(){
    const sheet = document.querySelector('.sheet');
    const note = document.querySelector('.note');
    const cameraTool = document.querySelector('.tool[aria-label="Камера"]');
    const cameraInput = document.getElementById('camera-input');
    const shareButton = document.querySelector('[data-role="share"]');
    const statusBarMeta = document.getElementById('status-bar-style');
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');

    function applyStatusBarStyle(source){
      if (!statusBarMeta){
        return;
      }
      const isDark = typeof source.matches === 'boolean' ? source.matches : darkScheme.matches;
      statusBarMeta.setAttribute('content', isDark ? 'black' : 'default');
    }

    applyStatusBarStyle(darkScheme);
    if (typeof darkScheme.addEventListener === 'function'){
      darkScheme.addEventListener('change', applyStatusBarStyle);
    } else if (typeof darkScheme.addListener === 'function'){
      darkScheme.addListener(applyStatusBarStyle);
    }

    if (!sheet || !note) {
      return;
    }

    const TEXT_BLOCK_SELECTOR = '.title, .body';

    function createBlock(type){
      const block = document.createElement('div');
      block.classList.add(type);
      block.innerHTML = '';
      return block;
    }

    function ensureBlocks(){
      const children = Array.from(note.children);
      if (!children.length){
        note.appendChild(createBlock('title'));
      }

      let textIndex = 0;
      Array.from(note.children).forEach(child => {
        if (child.classList.contains('photo-block')){
          return;
        }

        const desired = textIndex === 0 ? 'title' : 'body';
        textIndex += 1;

        child.classList.remove('title', 'body');
        child.classList.add(desired);

        if (child.innerHTML === '<br>' || child.innerHTML === '<br />'){
          child.innerHTML = '';
        }
      });

      if (!textIndex){
        note.appendChild(createBlock('title'));
      }
    }

    function placeCaretInside(element){
      const selection = window.getSelection();
      const range = document.createRange();
      range.selectNodeContents(element);
      range.collapse(false);
      selection.removeAllRanges();
      selection.addRange(range);
    }

    function focusEnd(){
      ensureBlocks();
      const textBlocks = Array.from(note.querySelectorAll(TEXT_BLOCK_SELECTOR));
      const target = textBlocks.length ? textBlocks[textBlocks.length - 1] : note;
      note.focus({ preventScroll: true });
      placeCaretInside(target);
    }

    function insertBlockAfter(reference, block){
      if (reference && reference.parentElement === note){
        note.insertBefore(block, reference.nextSibling);
      } else {
        note.appendChild(block);
      }
    }

    function getCurrentBlock(){
      const selection = window.getSelection();
      if (!selection.rangeCount){
        return null;
      }
      const anchorNode = selection.anchorNode instanceof Element ? selection.anchorNode : selection.anchorNode?.parentElement;
      return anchorNode ? anchorNode.closest('.title, .body, .photo-block') : null;
    }

    sheet.addEventListener('pointerdown', event => {
      if (event.target.closest('.note') || event.target.closest('.toolbar')){
        return;
      }
      event.preventDefault();
      focusEnd();
    });

    function hasTypedContent(){
      return Array.from(note.querySelectorAll(TEXT_BLOCK_SELECTOR)).some(block => {
        const text = block.textContent || '';
        return text.replace(/[\s\u200B]+/g, '').length > 0;
      });
    }

    function hasMediaContent(){
      return !!note.querySelector('.photo-block');
    }

    function updateShareState(){
      if (!shareButton){
        return;
      }
      const active = hasTypedContent() || hasMediaContent();
      shareButton.classList.toggle('muted', !active);
      shareButton.setAttribute('aria-disabled', active ? 'false' : 'true');
    }

    note.addEventListener('focus', () => {
      ensureBlocks();
      updateShareState();
    });
    ensureBlocks();
    updateShareState();

    note.addEventListener('keydown', event => {
      if (event.key === 'Enter' && !event.shiftKey){
        event.preventDefault();
        const currentBlock = getCurrentBlock();
        const newBlock = createBlock('body');
        insertBlockAfter(currentBlock, newBlock);
        note.focus({ preventScroll: true });
        placeCaretInside(newBlock);
        ensureBlocks();
        updateShareState();
      }
    });

    note.addEventListener('input', () => {
      ensureBlocks();
      updateShareState();
    });

    cameraTool?.addEventListener('click', () => {
      note.focus({ preventScroll: true });
      cameraInput?.click();
    });

    cameraInput?.addEventListener('change', () => {
      const file = cameraInput.files && cameraInput.files[0];
      if (!file){
        return;
      }

      const reader = new FileReader();
      reader.addEventListener('load', () => {
        const block = document.createElement('div');
        block.className = 'photo-block';
        const img = document.createElement('img');
        img.src = String(reader.result);
        img.alt = 'Добавленное фото';
        block.appendChild(img);

        const currentBlock = getCurrentBlock();
        insertBlockAfter(currentBlock, block);

        ensureBlocks();
        updateShareState();

        let nextEditable = block.nextElementSibling;
        while (nextEditable && nextEditable.classList.contains('photo-block')){
          nextEditable = nextEditable.nextElementSibling;
        }

        if (!nextEditable){
          nextEditable = createBlock('body');
          note.insertBefore(nextEditable, block.nextSibling);
        }

        note.focus({ preventScroll: true });
        placeCaretInside(nextEditable);
      });

      reader.readAsDataURL(file);
      cameraInput.value = '';
    });
  })();
</script>
</body>
</html>
